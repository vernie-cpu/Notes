# 用例设计方法

## 等价类划分



## 边界值





## 正交表分析法

### 应用场景

正交排列法，能够使用最小的测试过程集合获得最大的测试覆盖率。当可能的输入数据或者输入数据的组合数量很大时，由于不可能为每个输入组合都创建测试用例，可以采用这种方法。

这种测试方法是从大量的测试条件组合中找出具有代表性的测试场景。利用正交表，结合等价类划分、边界值等方法来编写测试用例。

正交表一般不需要记，能够根据确定的**因素数**和**水平数 **，通过查找正交表，选择合适的正交表使用即可。

常用正交表：https://www.docin.com/p-2228475212.html



### 正交表概念

<img src='./images/testtheory_001.png' style='width:70%; float: left;'>

根据 **因数个数** 和 **水平数** 计算 **行数**。

公式：`n = k * (m - 1) + 1`

示例：n = 4 * (3 - 1) + 1 = 9







# TDD

TDD是**测试驱动开发**（Test-Driven Development）的英文简称，是敏捷开发中的一项核心实践和技术，也是一种设计方法论。

**TDD 的基本思想就是在开发功能代码之前，先编写测试代码。即利用测试来驱动开发，是TDD的核心。要实现某个功能，要编写某个类或某个函数，应首先编写测试代码，明确这个类、这个函数如何使用，如何测试，然后在对其进行设计、编码。**

TDD 的基本过程可以拆解为以下 6 个步骤：

1. 分析需求，把需求拆分为具体的任务。
2. 从任务列表中取出一个任务，并对其编写测试用例。
3. 由于没有实际的功能代码，测试代码不大可能会通过（红）。
4. 编写对应的功能代码，尽快让测试代码通过（绿）。
5. 对代码进行重构优化，并保证测试通过（重构）。
6. 重复以上步骤。



TDD 流程比较关键的一环在于如何写出有效的测试代码，这里有 4 个原则可以参考：

1. 测试过程应该尽量模拟正常使用的过程。
2. 应该尽量做到分支覆盖。
3. 测试数据应该尽量包括真实数据，以及边界数据。
4. 测试语句和测试数据应该尽量简单，容易理解。





# Scrum

Scrum 是用于开发、交付和持续支持复杂产品的一个框架，是一个增量的、迭代的开发过程。

在这个框架中，整个开发过程由若干个短的迭代周期组成，一个短的迭代周期称为一个Sprint，每个Sprint的建议长度是一至四周。

在Scrum中，使用产品Backlog来管理产品的需求，产品backlog是一个按照商业价值排序的需求列表，列表条目的体现形式通常为用户故事。Scrum团队总是先开发对客户具有较高价值的需求。

在Sprint中，Scrum团队从产品Backlog中挑选最高优先级的需求进行开发。

挑选的需求在Sprint计划会议上经过讨论、分析和估算得到相应的任务列表，我们称它为Sprint backlog。

在每个迭代结束时，Scrum团队将递交潜在可交付的产品增量。 Scrum起源于软件开发项目，但它适用于任何复杂的或是创新性的项目。



**三种角色：Product Owner、Scrum Master、 Development Team**

**三个工件：Product Backlog、Sprint Backlog、Increment**

**流程图：**

<img src='./images/testtheory_002.png' style='width: 85%; float: left;'>



**Scrum 和 敏捷 的关系：**

> 敏捷开发以用户的需求进化为核心，采用迭代、循序渐进的方法进行软件开发。在敏捷开发中，软件项目在构建初期被切分成多个子项目，各个子项目的成果都经过测试，具备可视、可集成和可运行使用的特征。
>
> 敏捷是一种适应型生命周期的使用，它不会预先固定、设计和规划产品，而是让产品基于反馈环在整个项目中演进。它允许产品从不明确的需求和环境中涌现出来，因此，能够非常灵活的面对变化。它很灵敏迅速，因为变化不会减慢它的速度。

**敏捷其实是一个观点，拆解复杂的大需求，小步快跑，顺应变化** 。但敏捷不会告诉我们具体怎么做，具体怎么做是Scrum要做的事情，包含需要什么样的角色、具体的执行流程、精准的改进计划等。

所以说，Scrum 是一种实现 敏捷 的方法论，但是 不等于 敏捷就是 Scrum，还有其他敏捷方法 如：XP、DSDM、ADD等。



# 性能测试基础

## 1. 软件质量模型中的效率特性(性能概述)

软件质量模型中的效率特性即为软件的性能，其中包含两个方面的特性：**时间特性和资源特性。**

1. 时间特性：系统处理客户请求的响应时间；
2. 资源特性：在进行性能测试过程中，系统资源消耗的情况，常见的系统资源主要包括处理器（cpu）、内存和磁盘的使用情况。

所以通常如果我们说到性能，不仅仅只包括响应时间，还应该包括系统资源消耗。

虽然性能包含了上述两个方面，但不同的人对性能的关注点是不一样的，比如客户爸爸一般提的时候，更关注的是时间特性。通常情况下，用户、系统管理员，性能测试工程师，以及开发都会关注软件的性能。

1. 用户的关注

   从用户的角度来说，软件性能是软件系统对用户提交请求所响应的时间。

2. 系统管理员、性能测试工程师

   响应时间+服务器资源的使用情况，系统硬件资源的可扩展性（性能规划）,比如系统现在支持100并发，那将来是否能支持200并发？

3. 开发

   上述用户管理员和测试的关注点开发都需要关注，此外他们还会关注内存泄露，数据库死锁，中间件，应用服务器等



## 2. 性能测试相关术语

1. 响应时间

2. 并发用户数

3. 吞吐量

4. 吞吐率

5. TPS/QPS

6. 点击率

7. 资源利用率

8. 性能计数器

9. 思考时间



## 3. 性能测试划分

### 1. 负载测试

通过对被测系统不断加压，直到超过预定的指标或者部分资源已经达到了一种饱和状态不能再加压为止。就像举重运动员，在举重过程中不断的增加杠铃重量，直到运动员无法举起

 该方法主要是为了找到系统最大的负载能力，为性能调优提供数据。

 负载测试有以下特点：

（1）目的：找到系统最大的负载能力

（2）环境：需要在特定的环境下进行测试

（3）手段：不断对系统进行加压，直到系统中部分资源达到极限。



### 2. 压力测试

系统已经达到一定的饱和程度（如CPU，磁盘等已经处于饱和状态），此时系统处理业务的能力，系统是否会出现错误。

  疲劳测试是压力测试的一种表现形式。比如一个人很累了，但还在持续不停的工作。

  压力测试有以下特点：

（1）目的：测试在系统已经达到一定的饱和程度时，系统处理业务的能力。

（2）手段：使用模拟负载等方法，使系统资源达到一个较高的水平

（3）一般用于系统稳定性测试。



### 3. 配置测试

通过调整系统软硬件环境，了解各种不同环境对系统性能的影响，从而找到系统的最优配置。

  配置测试有以下特点：

（1）目的：通过调整环境了解不同因素对系统性能的影响情况，从而找到调优的方法。

（2）手段：通过调整系统软硬件环境，使系统在不同环境下进行性能测试。

（3）一般用于系统调优和规划能力。



### 4. 并发测试

通过模拟用户并发访问，测试多用户同时访问同一应用、模块或者数据，观察系统是否存在死锁、内存泄漏、系统处理速度下降等其他一些性能问题。

  并发测试有以下特点：

（1）目的：当多用户并发访问时，系统是否存在一些可能的并发问题。

（2）手段：模拟多用户同时并发操作。



### 5. 可靠性测试

当系统在一定的业务压力下，让系统持续运行一段时间，观察系统是否达到要求的稳定性，此处强调在一定业务压力下持续运行的能力，可靠性测试必须给出一个明确的要求，比如系统能够持续无故障运行多少天。

  可靠性测试有以下特点：

（1）目的：测试系统在一定业务压力下系统可持续运行的时间。

（2）环境：系统在一定的业务压力环境下持续运行。

（3）测试过程中要关注系统运行的情况。



### 6. 基准测试

在一定的软件硬件和网络环境下，模拟一定数量的虚拟用户运行一种或多种业务，将测试结果作为基线数据，在系统调优或系统评测过程中，通过运行相同的业务场景并比较测试结果确定调优是否达到效果或者为系统的选择提供决策数据。

基准测试主要包括以下2个目的：

（1）度量改善性能测试的情况。

（2）测试并且调优，保证系统达到性能要求或者服务协议要求，在这个测试过程中，基准测试与性能测试迭代配合，以确定调优的情况。



### 7. 各类测试执行的阶段

上述的6种性能测试类型，我们应该安排什么阶段呢？一般情况下，在编码阶段进行并发测试、压力测试和配置测试，因为在编码阶段需要快速的发现性能问题，编码阶段结束后，系统进入测试阶段，此时更多的是测试系统的稳定性和对系统进行调优，使系统的性能最优化，所以测试阶段主要是进行负载测试、基准测试和配置测试。



## 4. 性能测试应用领域

### 1. 能力验证

“某系统能否在条件A下具备B性能”，重点在于验证系统是否具备某种能力。有以下几个特点：

（1）要求在一个已确定的环境下运行。

（2）需要根据典型场景来设置测试方案和测试用例。



### 2. 规划能力

体现系统如何才能达到要求的性能指标。“系统如何才能支持未来用户增长的需求”，强调的是未来能力增长的一个需求，着眼于未来系统的规划。有以下几个特点：

（1）对系统能力的一种探索性的测试。

（2）可以了解系统的性能及系统性能的可扩展性。



### 3.性能调优

通过测试来调整系统的环境，最终使系统性能达到最优的状态。性能调优是一个持续的过程，主要的调优对象有数据参数、应用服务器、系统的硬件资源等

性能的调优过程如下：

（1）确定本次性能测试的基准环境，基准负载和基准性能指标，目的是将这些基准数据作为后期测试数据的参考对象。

（2）对系统进行调优（调优的对象包括代码、数据库、应用服务器、系统资源等），再调整系统运行环境和测试方案，重复进行性能测试并记录测试的结果。

（3）将调整后的测试结果与基准数据进行比较，以确定调优的效果，重复执行步骤2直到性能指标满足要求。



### 4. 缺陷发现

性能测试应用领域的主要目标是通过性能测试的手段来发现系统存在的缺陷。很多系统在实验测试环境中没有发现任何问题，但交付给客户时就出现了很多莫名其妙的错误。如果交付后出现多人同时访问速度缓慢或者直接宕机的现象，那么很有可能是由于系统的性能问题引起的。